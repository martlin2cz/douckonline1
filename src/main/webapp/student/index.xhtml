<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    
  <ui:composition template="/WEB-INF/templates/main-template.xhtml">
    <ui:define name="main-content">

	<h1>Student</h1>
	<h:panelGrid columns="2">
	    <h:outputLabel value="Account ballance" />
	    <h:outputText value="#{studentsProfileController.ballance}" 
			title="Payments total: #{studentsProfileController.incomes}, Lessons total: #{studentsProfileController.outcomes} "/>
	</h:panelGrid>
	    
	<h2>Lectures</h2>
	<c:forEach items="#{studentsProfileController.actualLessons}" var="lecture">
	    <h:panelGrid columns="1">
		<h:panelGrid columns="4">
		    <h:outputLabel value="Subject:" />
		    <h:outputText value="#{lecture.teaching.subject.name}" />
		    <h:outputLabel value="Lector:" />
		    <h:outputText value="#{lecture.teaching.lector.fullName}" />
		
		    <h:outputLabel value="When:" />
		    <h:outputText value="#{lecture.date.time}" >
			<f:convertDateTime pattern="dd.MM.yyyy" />
		    </h:outputText>
		    
		    <h:outputLabel value="Duration:" />
		    <h:outputText value="#{lecture.duration.time}" >
			<f:convertDateTime pattern="HH:mm" />
		    </h:outputText>
		    
		</h:panelGrid>
			
		<h:outputLabel value="Description" />
		<h:outputText value="#{lecture.description}" />
	    
	    </h:panelGrid>
	
	
	</c:forEach>
	
	<h2>Payments</h2>
	<c:forEach items="#{studentsProfileController.actualPayments}" var="payment">
	    
	    <h:panelGrid columns="6">
		<h:outputLabel value="When:" />
		<h:outputText value="#{payment.date.time}" />

		<h:outputLabel value="Amount:" />
		<h:outputText value="#{payment.amount}" />
		
		<c:if test="#{payment.discount > 0}">
		    <h:outputLabel value="Discount:" />
		    <h:outputText value="#{payment.discount}" />
		</c:if>
	    </h:panelGrid>
	    
	</c:forEach>
	

    </ui:define>
  </ui:composition>
</html>
